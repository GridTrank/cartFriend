<view><view data-event-opts="{{[['tap',[['hideDrawer',['$event']]]]]}}" class="content" catchtap="__e"><scroll-view class="{{['msg-list',popupLayerClass]}}" style="{{('bottom:'+(inputHight+50)+'px')}}" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}" upper-threshold="50" data-event-opts="{{[['scrolltoupper',[['loadHistory',['$event']]]]]}}" bindscrolltoupper="__e"><block s-for="$root.l0 trackBy index" s-for-item="row" s-for-index="index"><view class="row" id="{{'msg'+row.$orig.id}}"><block s-if="{{row.$orig.userId===user.id}}"><view class="my"><view class="left"><view class="bubble"><rich-text nodes="{{row.m0}}"></rich-text></view></view><view class="right"><image src="{{user.photo}}"></image></view></view></block><block s-else><view class="other"><view class="left"><image src="{{toUser.photo}}"></image></view><view class="right"><view class="username"><view class="name">{{toUser.nickName}}</view></view><view class="bubble"><rich-text nodes="{{row.m1}}"></rich-text></view></view></view></block></view></block></scroll-view></view><view data-event-opts="{{[['touchmove',[['e0',['$event']]]]]}}" class="{{['popup-layer',popupLayerClass]}}" catchtouchmove="__e"><swiper class="{{['emoji-swiper',(hideEmoji)?'hidden':'']}}" indicator-dots="true" duration="150"><block s-for="emojiList trackBy pid" s-for-item="page" s-for-index="pid"><swiper-item><block s-for="page trackBy eid" s-for-item="em" s-for-index="eid"><view data-event-opts="{{[['tap',[['addEmoji',['$0'],[[['emojiList','',pid],['','',eid]]]]]]]}}" bindtap="__e"><image mode="widthFix" src="{{'/static/img/emoji/'+em.url}}"></image></view></block></swiper-item></block></swiper><view class="{{['more-layer',(hideMore)?'hidden':'']}}"><view class="list"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon tupian2"></view></view><view data-event-opts="{{[['tap',[['camera',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon paizhao"></view></view></view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box',popupLayerClass]}}" style="{{'margin-bottom:'+(inputHight+'px')+';'}}" catchtouchmove="__e"><view class="textbox"><view data-event-opts="{{[['touchstart',[['voiceBegin',['$event']]]],['touchmove',[['voiceIng',['$event']]]],['touchend',[['voiceEnd',['$event']]]],['touchcancel',[['voiceCancel',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" bindtouchstart="__e" catchtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e">{{''+voiceTis+''}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box"><textarea auto-height="true" adjust-position="{{false}}" data-event-opts="{{[['focus',[['textareaFocus',['$event']]]],['blur',[['textareaBlur',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindfocus="__e" bindblur="__e" bindinput="__e"></textarea></view><view data-event-opts="{{[['tap',[['chooseEmoji',['$event']]]]]}}" class="em" bindtap="__e"><view class="icon biaoqing"></view></view></view></view><view data-event-opts="{{[['tap',[['sendMsg',['$event']]]]]}}" class="{{['send',isVoice?'hidden':'']}}" bindtap="__e"><view class="btn">发送</view></view></view><view class="{{['record',recording?'':'hidden']}}"><view class="{{['ing',willStop?'hidden':'']}}"><view class="icon luyin2"></view></view><view class="{{['cancel',willStop?'':'hidden']}}"><view class="icon chehui"></view></view><view class="{{['tis',willStop?'change':'']}}">{{recordTis}}</view></view></view>